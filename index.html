<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Menggeris Watches and Eyewear</title>
    
    <!-- Google Translate Script -->
    <script type="text/javascript">
      function googleTranslateElementInit() {
        new google.translate.TranslateElement({
          pageLanguage: 'en',
          includedLanguages: 'en,id,ja,ar',
          layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
          autoDisplay: false,
          multilanguagePage: true
        }, 'google_translate_element');
        
        // Add global function to change language programmatically
        // window.changeGoogleLanguage = function(languageCode) {
        //   // Ensure Google's cookie is aligned for immediate effect
        //   try {
        //     const hostname = window.location.hostname;
        //     const secureAttrs = window.location.protocol === 'https:' ? '; Secure; SameSite=Lax' : '';
        //     const maxAge = '; Max-Age=31536000';
        //     const baseDomain = (() => {
        //       const parts = hostname.split('.');
        //       if (parts.length >= 2) {
        //         return parts.slice(-2).join('.');
        //       }
        //       return hostname;
        //     })();
        //     const cookieCore = `googtrans=/en/${languageCode}`;
        //     // set for current host
        //     document.cookie = `${cookieCore}; path=/${maxAge}${secureAttrs}`;
        //     // set for apex/base domain to cover www and root
        //     if (baseDomain && baseDomain.includes('.')) {
        //       document.cookie = `${cookieCore}; path=/; domain=.${baseDomain}${maxAge}${secureAttrs}`;
        //     }
        //   } catch {}
        //   const selectElement = document.querySelector('.goog-te-combo');
        //   if (selectElement) {
        //     selectElement.value = languageCode;
        //     const event = new Event('change', { bubbles: true });
        //     selectElement.dispatchEvent(event);
            
        //     // Also trigger the translation directly
        //     setTimeout(() => {
        //       if (window.google && window.google.translate) {
        //         try {
        //           // Force translation by triggering Google's internal mechanisms
        //           document.body.classList.remove('notranslate');
        //           document.body.classList.add('translated-ltr');
        //         } catch (e) {
        //           console.warn('Translation trigger failed:', e);
        //         }
        //       }
        //     }, 100);
        //   }
        // };

        // Auto-apply stored language preference from localStorage if present
        // try {
        //   const preferred = window.localStorage.getItem('preferredLanguage');
        //   if (preferred) {
        //     const applyPreferred = () => {
        //       const selectEl = document.querySelector('.goog-te-combo');
        //       if (selectEl) {
        //         if (selectEl.value === preferred) {
        //           return true; // already set, avoid redundant change events
        //         }
        //         // align cookie before applying change
        //         try {
        //           const hostname = window.location.hostname;
        //           const secureAttrs = window.location.protocol === 'https:' ? '; Secure; SameSite=Lax' : '';
        //           const maxAge = '; Max-Age=31536000';
        //           const baseDomain = (() => {
        //             const parts = hostname.split('.');
        //             if (parts.length >= 2) {
        //               return parts.slice(-2).join('.');
        //             }
        //             return hostname;
        //           })();
        //           const cookieCore = `googtrans=/en/${preferred}`;
        //           document.cookie = `${cookieCore}; path=/${maxAge}${secureAttrs}`;
        //           if (baseDomain && baseDomain.includes('.')) {
        //             document.cookie = `${cookieCore}; path=/; domain=.${baseDomain}${maxAge}${secureAttrs}`;
        //           }
        //         } catch {}
        //         selectEl.value = preferred;
        //         const ev = new Event('change', { bubbles: true });
        //         selectEl.dispatchEvent(ev);
        //         return true;
        //       }
        //       return false;
        //     };
        //     if (!applyPreferred()) {
        //       const start = Date.now();
        //       const tick = () => {
        //         if (applyPreferred()) return;
        //         if (Date.now() - start > 4000) return;
        //         setTimeout(tick, 150);
        //       };
        //       tick();
        //     }
        //   }
        // } catch (e) {
        //   // ignore localStorage access errors
        // }
      }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  </head>
  <body>
    <div id="google_translate_element" style="position: absolute; opacity: 0; pointer-events: none; height: 0; width: 0; overflow: hidden;"></div>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
